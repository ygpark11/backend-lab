# [Master 감시 설정]
# mymaster라는 이름의 master를 감시합니다.
# IP 주소(127.0.0.1)는 entrypoint.sh 스크립트가 실제 Master의 IP로 동적으로 변경해 줄 임시 값입니다.
# quorum 값 1은, Sentinel 1대만 동의해도 장애로 판단하겠다는 의미입니다.
sentinel monitor mymaster 127.0.0.1 6379 1

# [Docker 네트워크 환경을 위한 필수 설정]
# Docker 환경처럼 IP가 유동적일 수 있는 곳에서, 호스트 이름을 주기적으로 다시 DNS 조회하여 IP를 찾아가도록 합니다.
sentinel resolve-hostnames yes
# Sentinel이 클라이언트나 다른 Sentinel에게 Master/Slave 정보를 알려줄 때, IP 주소가 아닌 서비스 이름(hostname)으로 알려줍니다.
sentinel announce-hostnames yes
# 이 Sentinel 자신의 IP 주소를 다른 곳에 알릴 때 사용할 주소를 지정합니다. (0.0.0.0은 자동 감지)
sentinel announce-ip 0.0.0.0

# [장애 감지 및 복구 시간 설정]
# Master가 응답이 없는지 10000ms (10초)가 지나면, 주관적 다운(sdown)으로 판단합니다.
sentinel down-after-milliseconds mymaster 10000
# 장애 복구(Failover) 절차의 전체 타임아웃을 60000ms (1분)로 설정합니다.
sentinel failover-timeout mymaster 60000
# 새로운 Master로 승격된 후, 동시에 동기화(새 Master를 따르도록 설정)할 Slave의 수를 1로 설정합니다.
sentinel parallel-syncs mymaster 1